(window.webpackJsonp=window.webpackJsonp||[]).push([[61],{3006:function(e,t,a){"use strict";a.r(t);var n=a(2401),c=a(14),r=a(15),l=a(24),s=a(23),o=a(25),i=a(30),d=a(0),m=a.n(d),u=a(3),p=a(2402),b=a(269),E=a(456),v=a(2),y=a.n(v),f=a(5),_=a(2403);function h(e){var t=e.address,n=e.privateKey,c=e.addressQRCode,r=e.privateKeyQRCode,l=a(304);return m.a.createElement("div",{className:"card d-inline-block"},m.a.createElement("div",{className:"card-body d-flex"},m.a.createElement("div",{className:"col text-center"},m.a.createElement("div",{className:"font-weight-bold"},"Address"),m.a.createElement("img",{src:c,style:g.qr})),m.a.createElement("div",{className:"col"},m.a.createElement("img",{src:l,style:g.logo})),m.a.createElement("div",{className:"col text-center"},m.a.createElement("div",{className:"font-weight-bold"},"Private Key"),m.a.createElement("img",{src:r,style:g.qr}),m.a.createElement("br",null))),m.a.createElement("div",{className:"card-body p-0 text-center"},m.a.createElement("table",{className:"table m-0"},m.a.createElement("tr",null,m.a.createElement("th",null,"Address"),m.a.createElement("td",null,t)),m.a.createElement("tr",null,m.a.createElement("th",{style:g.th},"Private Key"),m.a.createElement("td",null,n)))))}var g={logo:{height:150,marginTop:50},qr:{height:200},th:{width:200}},w=a(1841),j=a.n(w);function N(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:260;return j.a.toDataURL(e,{width:t})}var O=function(e){return'<link rel="stylesheet" href="'.concat(e,'" type="text/css" />')};function k(){return(k=Object(f.a)(y.a.mark(function e(t,n){var c,r,l,s,o,i;return y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N(t);case 2:return c=e.sent,e.next=5,N(n);case 5:r=e.sent,l=Object(_.renderToString)(m.a.createElement(h,{addressQRCode:c,privateKeyQRCode:r,address:t,privateKey:n})),"",s=[a(2405)],o=s.map(function(e){return O(e)}).join(""),i="\n    <html>\n      <head>\n        ".concat(o,'\n      </head>\n      <body style="background-color: white;">\n        <div id="app">').concat(l,"</div>\n          <style>").concat("",'</style>\n            \n          <script type="text/javascript">\n            setTimeout(function () { window.print(); }, 2000);\n          <\/script>\n      </body>\n    </html>\n  '),window.open("about:blank","_blank").document.write(i);case 13:case"end":return e.stop()}},e)}))).apply(this,arguments)}var x=a(51),K=a(19),S=a(112),C=a(2406),P=a.n(C),A=a(88),R=a(61),V=a(2407),T=a(317);function W(e){var t=e.icon,a=e.completed,n=void 0!==a&&a,c=e.first,r=void 0!==c&&c;return m.a.createElement("div",{className:"col step d-flex justify-content-center "+(n?"completed":"")},r&&m.a.createElement("div",{className:"progress first-progress"},m.a.createElement("div",{className:"progress-bar bg-danger"})),m.a.createElement("div",{className:"step-icon"},m.a.createElement("i",{className:t+" icon-waiting"}),m.a.createElement("i",{className:"fa fa-check icon-complete"})),m.a.createElement("div",{className:"progress"},m.a.createElement("div",{className:"progress-bar bg-danger"})))}function D(e){var t=e.children;return m.a.createElement("div",null,t)}var Q=function(e){function t(e){var a;e.isOpen;return Object(c.a)(this,t),(a=Object(l.a)(this,Object(s.a)(t).call(this))).generateAccount=function(){var e=Object(p.generateAccount)();a.setState({address:e.address,privateKey:e.privateKey,salt:V()})},a.hideModal=function(){var e=a.props.onClose;e&&e()},a.onPasswordChanged=function(e){var t=e.password,n=e.isValid;a.setState({fieldPassword:t,passwordValid:n})},a.printPaperWallet=function(){var e=a.state;!function(e,t){k.apply(this,arguments)}(e.address,e.privateKey)},a.nextStep=function(){var e=a.state,t=e.step,n=e.privateKey,c=t<3?t+1:3;switch(c){case 1:var r=a.encryptData();a.setState({encryptedKey:r.hex});break;case 3:a.props.login(n)}a.setState({step:c})},a.previousStep=function(){a.setState(function(e){var t=e.step;return{step:t>0?t-1:0}})},a.downloadEncryptedKeyFile=function(){var e=a.state.address;Object(E.a)(a.buildEncryptedKeyStore(),e+".txt")},a.isStepValid=function(){var e=a.state,t=e.step,n=e.passwordValid;switch(t){case 0:return n}return!0},a.state={step:0,fieldPassword:"",fieldEncryptedKey:"",passwordValid:!1},a}return Object(o.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){this.generateAccount()}},{key:"encryptData",value:function(){var e=this.state,t=e.fieldPassword,a=e.privateKey,n=e.salt,c=Object(b.b)(t,n),r=Object(b.c)(c,a);return{encryptedKey:c,hex:r.hex,bytes:r.bytes}}},{key:"buildEncryptedKeyStore",value:function(){var e=this.state,t={version:1,key:e.encryptedKey,address:e.address,salt:e.salt};return Object(A.byteArray2hexStr)(Object(R.stringToBytes)(JSON.stringify(t)))}},{key:"componentWillReceiveProps",value:function(e){var t=e.isOpen;this.setState({isOpen:t})}},{key:"renderPage",value:function(){var e=this.state,t=e.step,a=e.privateKey;switch(t){case 0:return m.a.createElement(D,null,m.a.createElement("div",{className:"d-flex justify-content-center text-center"},m.a.createElement("div",{className:"col-md-12"},m.a.createElement("h5",null,Object(u.c)("new_wallet")),m.a.createElement("p",null,Object(u.c)("password_encr_key_message_0")),m.a.createElement("p",null,Object(u.c)("password_encr_key_message_1")))),m.a.createElement("div",{className:"d-flex justify-content-center"},m.a.createElement("div",{className:"col-md-5"},m.a.createElement("div",{className:"text-center"},m.a.createElement("label",null,Object(u.c)("password")),m.a.createElement(P.a,{minLength:8,tooShortWord:Object(u.b)("too_short"),changeCallback:this.onPasswordChanged,minScore:2,scoreWords:[Object(u.b)("weak"),Object(u.b)("okay"),Object(u.b)("good"),Object(u.b)("strong"),Object(u.b)("secure")],inputProps:{name:"password_input",autoComplete:"off",className:""}}),m.a.createElement("div",{className:"text-muted"},Object(u.c)("strong_password_info"))))));case 1:return m.a.createElement(D,null,m.a.createElement("div",{className:"d-flex justify-content-center text-center"},m.a.createElement("div",{className:"col-md-6"},m.a.createElement("h5",null,Object(u.c)("save_keystore_file")),m.a.createElement("p",null,m.a.createElement("button",{className:"btn btn-lg btn-block",onClick:this.downloadEncryptedKeyFile},m.a.createElement("i",{className:"fa fa-download mr-2"}),Object(u.c)("download_keystore_file"))))),m.a.createElement("p",{className:"text-center"},m.a.createElement("b",null,Object(u.c)("do_not_lose_it"))," ",Object(u.c)("do_not_lose_it_message_0")," ",m.a.createElement("br",null),m.a.createElement("b",null,Object(u.c)("do_not_share_it"))," ",Object(u.c)("do_not_share_it_message_0")," ",m.a.createElement("br",null),m.a.createElement("b",null,Object(u.c)("make_a_backup"))," ",Object(u.c)("make_a_backup_message_0")," ",m.a.createElement("br",null)));case 2:return m.a.createElement(D,null,m.a.createElement("div",{className:"d-flex justify-content-center text-center"},m.a.createElement("div",{className:"col-md-6"},m.a.createElement("h5",null,Object(u.c)("save_private_key")),m.a.createElement("p",null,m.a.createElement("div",{className:"input-group mb-3"},m.a.createElement("input",{type:"text",readOnly:!0,className:"form-control",value:a}),m.a.createElement("div",{className:"input-group-append"},m.a.createElement(S.CopyToClipboard,{text:a},m.a.createElement("button",{className:"btn btn-outline-secondary",type:"button"},m.a.createElement("i",{className:"fa fa-paste"})))))),m.a.createElement("p",null,m.a.createElement("button",{className:"btn btn-lg btn-block",onClick:this.printPaperWallet},m.a.createElement("i",{className:"fa fa-print mr-2"}),Object(u.c)("print_paper_wallet"))))),m.a.createElement("p",{className:"text-center"},m.a.createElement("b",null,Object(u.c)("do_not_lose_it"))," ",Object(u.c)("do_not_lose_it_message_0")," ",m.a.createElement("br",null),m.a.createElement("b",null,Object(u.c)("do_not_share_it"))," ",Object(u.c)("do_not_share_it_message_0")," ",m.a.createElement("br",null),m.a.createElement("b",null,Object(u.c)("make_a_backup"))," ",Object(u.c)("make_a_backup_message_0")," ",m.a.createElement("br",null)));case 3:return m.a.createElement(D,null,m.a.createElement("div",{className:"text-center"},m.a.createElement("p",{className:"font-weight-bold"},Object(u.c)("new_wallet_ready_message")),m.a.createElement(x.a,{className:"btn btn-success",to:"/account"},Object(u.c)("go_to_account_page"))))}}},{key:"render",value:function(){Object(n.a)(this.props);var e=this.state.step;return m.a.createElement("main",{className:"container wallet-wizard header-overlap"},m.a.createElement("div",{className:"card"},m.a.createElement("div",{className:"text-center p-5 bg-dark"},m.a.createElement("img",{className:"wallet-wizard-logo",src:T})),m.a.createElement("div",{className:"card-body d-flex wizard-steps"},m.a.createElement(W,{completed:e>0,first:!0,icon:"fa fa-key"}),m.a.createElement(W,{completed:e>1,icon:"fa fa-save"}),m.a.createElement(W,{completed:e>2,icon:"fa fa-lock"})),m.a.createElement("div",{className:"card-body"},this.renderPage()),m.a.createElement("div",{className:"card-body"},m.a.createElement("div",{className:"row d-flex px-3"},e<3&&m.a.createElement("button",{disabled:!this.isStepValid(),className:"btn btn-dark btn-lg ml-auto",onClick:this.nextStep},Object(u.c)("next"))))))}}]),t}(m.a.PureComponent);var q={login:K.r};t.default=Object(i.connect)(function(e){return{account:e.app.account}},q)(Q)}}]);