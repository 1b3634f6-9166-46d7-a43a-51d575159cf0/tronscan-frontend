(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{1101:function(e,t,a){"use strict";a.d(t,"a",function(){return d});var n=a(14),c=a(15),o=a(24),r=a(23),l=a(25),s=a(0),i=a.n(s),m=a(150),p=a(12),u=a(3),d=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(o.a)(this,Object(r.a)(t).call(this,e))).state={open:!1,id:Object(m.a)(24)},a}return Object(l.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this,t=this.state,a=t.open,n=t.id,c=this.props,o=c.text,r=c.placement,l=c.testSecond,s=void 0===l?"":l,m=c.className,d=void 0===m?"":m,f=c.info,y=void 0===f?"":f;return i.a.createElement("div",{className:"d-inline-block"},i.a.createElement("div",{className:"question-mark",id:n,onMouseOver:function(){return e.setState({open:!0})},onMouseOut:function(){return e.setState({open:!1})}},i.a.createElement("i",null,"?")),i.a.createElement(p.h,{placement:r,isOpen:a,target:n,className:d,innerClassName:"w-100"},o?Object(u.b)(o):"",s?i.a.createElement("span",null,i.a.createElement("br",null)," ",Object(u.b)(s)):"",y||""))}}]),t}(i.a.Component)},1378:function(e,t,a){"use strict";a.d(t,"a",function(){return r});var n=a(0),c=a.n(n),o=a(13),r=(a(1379),Object(o.a)(function(){return a.e(38).then(a.bind(null,1710))},function(){return c.a.createElement("span",null)}))},1406:function(e,t,a){"use strict";var n=a(2),c=a.n(n),o=a(5),r=a(14),l=a(15),s=a(24),i=a(23),m=a(25),p=a(0),u=a.n(p),d=a(1378),f=(a(10),a(12),function(e){function t(){var e;return Object(r.a)(this,t),(e=Object(s.a)(this,Object(i.a)(t).call(this))).onVerify=function(t){e.setState({verificationCode:t}),e.props.handleCaptchaCode(t)},e.onExpired=function(){e.setState({verificationCode:null})},e.onLoad=function(e){},e.requestTrx=Object(o.a)(c.a.mark(function e(){return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e)})),e.canRequest=function(){return e.state.verificationCode},e.state={modal:null,verificationCode:null,waitingForTrx:!1},e}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return u.a.createElement(u.a.Fragment,null,u.a.createElement("div",{className:"d-flex justify-content-center"},u.a.createElement(d.a,{sitekey:"6LejYqQUAAAAADMEfCJkRyZdvzxtqdX5-83yUUjH",render:"explicit",onloadCallback:this.onLoad,expiredCallback:this.onExpired,verifyCallback:this.onVerify})))}}]),t}(p.Component));t.a=f},2125:function(e,t,a){"use strict";var n=a(104),c=a.n(n),o=a(65),r=a.n(o),l=a(14),s=a(15),i=a(24),m=a(23),p=a(25),u=a(151),d=a.n(u),f=a(0),y=a.n(f),g=a(10),b=a(30),h=a(3),v=a(43),E=d.a.Option,C=d.a.OptGroup,k=function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(i.a)(this,Object(m.a)(t).call(this))).refreshTokenBalances=function(){e.props.account.isLoggedIn&&e.props.reloadWallet()},e.handleTokenChange=function(t){e.setState({token:t},function(){e.getSelectedTokenBalance()})},e.tokenBalanceSelect=function(){var t=e.props.tokenBalanceSelectChange,a=e.state,n=a.token,c=a.decimals,o=a.balance,r=n.split("-")[1];t&&t(r,c,o)},e.getSelectedTokenBalance=function(){var t=e.props,a=t.tokenBalances,n=(t.tokens20,e.state.token),c=n.substr(n.length-5,5),o=n.split("-");if(n&&"TRC10"==c){var l=o[1],s=parseFloat(r()(a,function(e){return e.map_token_id===l}).map_amount),i=parseFloat(r()(a,function(e){return e.map_token_id===l}).map_token_precision);"TRX"==l?e.setState({decimals:6,balance:s},function(){e.tokenBalanceSelect()}):e.setState({decimals:i,balance:s},function(){e.tokenBalanceSelect()})}return 0},e.state={token:""},e}return Object(p.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.refreshTokenBalances()}},{key:"componentDidUpdate",value:function(){var e=this,t=this.props,a=t.tokenBalances;t.tokens20;a=c()(a,function(e){return e.balance>0}),!this.state.token&&a.length>0&&this.setState({token:a[0].map_token_name+"-"+a[0].map_token_id+"-TRC10"},function(){return e.getSelectedTokenBalance()})}},{key:"render",value:function(){var e=this.state.token,t=this.props,a=t.tokenBalances,n=t.tokens20,c=t.intl,o=t.className,r=void 0===o?"":o;return(a=_(a).filter(function(e){return e.balance>0}).filter(function(e){return e.map_token_id>0||"_"==e.map_token_id}).value()).map(function(e){return e.token_name_type=e.map_token_name+"-"+e.map_token_id+"-TRC10",e}),n.map(function(e){return e.token_name_type=e.name+"-TRC20",e}),y.a.createElement(d.a,{onChange:this.handleTokenChange,className:r,value:e},y.a.createElement(C,{label:Object(h.c)("TRC10_token"),key:"TRC10"},a.map(function(e,t){return y.a.createElement(E,{value:e.token_name_type,key:t},y.a.createElement("span",null," ",e.map_token_name,"_"!==e.map_token_id?y.a.createElement("span",{style:{fontSize:12,color:"#999",margin:"2px 4px 8px"}},"[ID:",e.map_token_id,"]"):"","(",e.map_amount," ",c.formatMessage({id:"available"}),")"))})))}}]),t}(y.a.Component);var S={reloadWallet:v.c};t.a=Object(b.connect)(function(e){return{account:e.app.account,wallet:e.app.wallet,tokenBalances:e.account.tokens,tokens20:e.account.tokens20}},S)(Object(g.h)(k))},3254:function(e,t,a){"use strict";a.r(t);var n,c=a(1105),o=a.n(c),r=a(2995),l=a.n(r),s=a(1918),i=a.n(s),m=a(2997),p=a.n(m),u=a(2),d=a.n(u),f=a(5),y=a(14),g=a(15),b=a(24),h=a(23),v=a(281),E=a(25),C=a(0),k=a.n(C),S=a(10),O=a(30),N=(a(81),a(2464)),j=a.n(N),x=a(3),w=a(3091),T=a.n(w),L=a(12),I=a(3092),M=a.n(I),B=a(2054),A=a.n(B),D=a(112),R=Object(O.connect)(function(e){return{account:e.app.account,wallet:e.app.wallet,tokenBalances:e.account.tokens,trxBalance:e.account.trxBalance||e.account.balance}})(n=Object(S.h)(n=function(e){function t(e){var a;return Object(y.a)(this,t),(a=Object(b.a)(this,Object(h.a)(t).call(this,e))).showInfoModal=function(){a.setState({showModal:!0})},a.hideInfoModal=function(){a.setState({showModal:!1})},a.confirmModal=function(){a.props.onConfirm},a.state={confirmed:!1,showModal:!1},a}return Object(E.a)(t,e),Object(g.a)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this.state.showModal,t=this.props,a=t.title,n=t.json,c=JSON.parse(n);return"string"==typeof c&&c.length>100&&(c=c.substr(0,100)+"..."),k.a.createElement("div",{className:"contract-compiler-console-info"},k.a.createElement("span",{className:"info-btn",onClick:this.showInfoModal},a),e?k.a.createElement(L.d,{isOpen:!0,toggle:this.hideInfoModal,fade:!1,className:"modal-dialog-centered contract-compiler-modal-content"},k.a.createElement(L.g,{className:"text-center _freezeHeader",toggle:this.hideInfoModal},a),k.a.createElement(L.e,{className:"_freezeBody"},k.a.createElement("div",null,"string"==typeof c?k.a.createElement(A.a,{data:c,theme:z,invertTheme:!0}):k.a.createElement(M.a,{src:c,theme:"summerfruit:inverted",iconStyle:"square",name:!1,displayDataTypes:!1})),k.a.createElement("div",{className:"mt-3 compile-modal-btn"},k.a.createElement(D.CopyToClipboard,{text:n},k.a.createElement("button",{className:"btn btn-primary col-sm",style:{background:"#4A90E2",borderRadius:"2px",border:"0px"}},Object(x.c)("Copy"))),k.a.createElement("button",{className:"btn btn-primary col-sm ml-4",style:{background:"#C23631",borderRadius:"2px",border:"0px"},onClick:this.hideInfoModal},Object(x.c)("compile_close"))))):"")}}]),t}(k.a.PureComponent))||n)||n,z={scheme:"summerfruit",author:"christopher corley (http://cscorley.github.io/)",base00:"#151515",base01:"#202020",base02:"#303030",base03:"#505050",base04:"#B0B0B0",base05:"#D0D0D0",base06:"#E0E0E0",base07:"#FFFFFF",base08:"#FF0086",base09:"#FD8900",base0A:"#ABA800",base0B:"#00C918",base0C:"#1faaaa",base0D:"#3777E6",base0E:"#AD00A1",base0F:"#cc6633"},F=a(1669),V=a.n(F),P=function(e){function t(e){var a;return Object(y.a)(this,t),(a=Object(b.a)(this,Object(h.a)(t).call(this,e))).state={loading:!0,color:{error:"orangered",success:"limegreen",warning:"yellowgreen",info:"blueviolet"}},a}return Object(E.a)(t,e),Object(g.a)(t,[{key:"componentDidMount",value:function(){}},{key:"componentWillReceiveProps",value:function(e){var t=this.refs.compilerConsole;t.scrollTop=t.scrollHeight}},{key:"render",value:function(){var e=this,t=this.state,a=(t.loading,t.html,t.color),n=this.props.CompileStatus;return k.a.createElement(V.a,null,k.a.createElement("div",{ref:"compilerConsole",className:"contract-compiler-console"},n.map(function(t,n){return k.a.createElement("div",{key:n},"success"==t.type&&"compile"==t.class&&k.a.createElement("div",{className:"contract-compiler-console-log",style:{color:a[t.type]}},"Compiled success: Contract ",t.contract.contractName," \xa0",k.a.createElement(R,{title:"Show ABI",json:JSON.stringify(t.contract.abi)}),k.a.createElement(R,{title:"Show Bytecode",json:JSON.stringify(t.contract.byteCode)})),t.type&&!t.class&&k.a.createElement("div",{className:"contract-compiler-console-log",style:{color:a[t.type]}},T()(t.content)),"info"==t.type&&"unsigned"==t.class&&k.a.createElement("div",{className:"contract-compiler-console-log",style:{color:a[t.type]}},"Transaction unsigned. \xa0",k.a.createElement(R,{title:"View Unsigned Transaction",json:JSON.stringify(t.contract)}),k.a.createElement("br",null),"Waiting user sign"),"info"==t.type&&"signed"==t.class&&k.a.createElement("div",{className:"contract-compiler-console-log",style:{color:a[t.type]}},"Transaction signed! \xa0",k.a.createElement(R,{title:"View Signed Transaction",json:JSON.stringify(t.contract)}),k.a.createElement("br",null),"Broadcast transaction"),"info"==t.type&&"broadcast"==t.class&&k.a.createElement("div",{className:"contract-compiler-console-log",style:{color:a[t.type]}},"Broadcast transaction success!\xa0",k.a.createElement(R,{title:"View Broadcast Result",json:JSON.stringify(t.contract)}),k.a.createElement("br",null),"Waiting for confirm from Tron blockchain"),"success"==t.type&&"deploy"==t.class&&k.a.createElement("div",{className:"contract-compiler-console-log",style:{color:a[t.type]}},T()(t.content)),"error"==t.type&&"deploy"==t.class&&k.a.createElement("div",{className:"contract-compiler-console-log",style:{color:a[t.type]}},T()(t.content)),"error"==t.type&&"info-error"==t.class&&k.a.createElement("div",{className:"contract-compiler-console-log",style:{color:a[t.type]}},T()(t.content),k.a.createElement("span",{className:"contract-compiler-console-info"},k.a.createElement("span",{onClick:function(){return e.props.deploy()},className:"info-btn ml-2"},"try again"))))})))}}]),t}(k.a.Component),U=Object(S.h)(P),H=a(1248),J=a.n(H),W=a(1249),Y=a.n(W),q=a(1210),X=a.n(q),G=a(1109),Q=a.n(G),Z=a(7),K=a(151),$=a.n(K),ee=a(1101),te=a(1406),ae=a(22),ne=a.n(ae),ce=a(1893),oe=a(53),re=a.n(oe),le=a(11),se=$.a.Option,ie=function(e){function t(e){var a;return Object(y.a)(this,t),(a=Object(b.a)(this,Object(h.a)(t).call(this,e))).handleCaptchaCode=function(e){a.setState({captcha_code:e})},a.handleVerifyCode=function(){var e=Object(f.a)(d.a.mark(function e(t){var n,c,o,r,l,s,i,m;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(window.gtag("event","verify",{event_category:"contract",event_label:a.props.account.address,referrer:window.location.origin,value:a.props.account.address}),n=a.props.form.getFieldsValue,c=a.state,o=c.contract_code,r=c.CompileStatus,(l=n()).contractAddress){e.next=8;break}a.showModal(Object(x.c)("please_enter_address")),e.next=24;break;case 8:if(l.contractName){e.next=12;break}a.showModal(Object(x.c)("please_enter_name")),e.next=24;break;case 12:if(o){e.next=16;break}a.showModal(Object(x.c)("please_enter_code")),e.next=24;break;case 16:return a.setState({loading:!0}),s=ce.Base64.encode(o),e.next=20,ne.a.post("".concat(le.e,"/api/solidity/contract/verify"),Object(Z.a)({solidity:s,runs:"0"},l));case 20:i=e.sent,200===(m=i.data).code?2001===m.data.status?(r.push({type:"info",content:'The Contract Source code for <span class="">'.concat(l.contractAddress,'</span> has alreadly been verified. Click here to view the <a href="/#/contract/').concat(l.contractAddress,'/code" class="info_link">Verified Contract Source Code</a>')}),a.setState({CompileStatus:r})):location.href="/#/contract/".concat(l.contractAddress,"/code"):(r.push({type:"error",content:'<span class="">'.concat(l.contractAddress,"</span> is not a existing contract. Please confirm and try again")}),a.setState({CompileStatus:r})),a.setState({loading:!1});case 24:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.state={compilers:["solidity-0.4.25_Odyssey_v3.2.3"],deaultCompiler:"solidity-0.4.25_Odyssey_v3.2.3",contract_code:"",captcha_code:null,CompileStatus:[],loading:!1},a}return Object(E.a)(t,e),Object(g.a)(t,[{key:"editorDidMount",value:function(e,t){e.focus()}},{key:"showModal",value:function(e){var t=this;this.setState({modal:k.a.createElement(re.a,{danger:!0,onConfirm:function(){return t.setState({modal:null})}},e)})}},{key:"render",value:function(){var e=this,t=this.state,a=t.compilers,n=t.deaultCompiler,c=t.contract_code,r=t.modal,l=t.captcha_code,s=t.CompileStatus,i=t.loading,m=this.props.intl,p=this.props.form.getFieldDecorator,u={labelCol:{span:8},wrapperCol:{span:16}};return k.a.createElement("div",{className:"pt-4 w-100 verify-contranct"},r,k.a.createElement(X.a,{layout:"horizontal"},k.a.createElement("div",{style:me.verify_header_box},k.a.createElement("div",{style:me.verify_header},k.a.createElement("div",{className:"mb-4"},k.a.createElement("p",null,Object(x.c)("verify_code1")),k.a.createElement("p",null,Object(x.c)("verify_code2")),k.a.createElement("p",null,Object(x.c)("verify_code3"))),k.a.createElement(J.a,{gutter:24,type:"flex",justify:"space-between"},k.a.createElement(Y.a,{span:12},k.a.createElement(X.a.Item,Object.assign({label:Object(x.c)("contract_address")},u),p("contractAddress",{})(k.a.createElement(Q.a,{placeholder:m.formatMessage({id:"contract_address"})})))),k.a.createElement(Y.a,{span:12},k.a.createElement(X.a.Item,Object.assign({label:Object(x.c)("contract_name")},u),p("contractName",{})(k.a.createElement(Q.a,{placeholder:m.formatMessage({id:"contract_name"})})))),k.a.createElement(Y.a,{span:12},k.a.createElement(X.a.Item,Object.assign({label:Object(x.c)("compiler")},u),p("compiler",{initialValue:n})(k.a.createElement($.a,{className:"w-100"},a.map(function(e,t){return k.a.createElement(se,{value:e,key:t},e)}))))),k.a.createElement(Y.a,{span:12},k.a.createElement(X.a.Item,Object.assign({label:Object(x.c)("contract_optimization")},u),p("optimizer",{initialValue:"1"})(k.a.createElement($.a,{className:"w-100"},k.a.createElement(se,{value:"1"},"Yes"),k.a.createElement(se,{value:"0"},"No"))))),k.a.createElement(Y.a,{span:12},k.a.createElement(X.a.Item,Object.assign({label:Object(x.c)("runs")},u),p("runs",{initialValue:"0"})(k.a.createElement($.a,{className:"w-100"},k.a.createElement(se,{value:"0"},"0"),k.a.createElement(se,{value:"200"},"200")))))))),k.a.createElement("p",{className:"text-center"},Object(x.c)("enter_contract_code")),k.a.createElement("div",{className:"card text-center",style:me.card},k.a.createElement("div",null,k.a.createElement("div",{className:"card-body"},k.a.createElement("div",{className:"row"},k.a.createElement("div",{className:"col-md-12 text-left"},k.a.createElement(j.a,{height:"600",language:"sol",theme:"vs-dark",options:{selectOnLineNumbers:!0},value:c,onChange:function(t){return e.setState({contract_code:t})},editorDidMount:this.editorDidMount}),k.a.createElement("div",{className:"contract-compiler-console text-left w-100"},k.a.createElement(U,{CompileStatus:s})))),k.a.createElement("div",{className:"row mt-3 contract-ABI"},k.a.createElement("div",{className:"col-md-12 "},k.a.createElement("div",{className:"d-flex justify-content-center pt-3"},k.a.createElement("p",{style:me.s_title},Object(x.c)("constructor_arguments_ABIencoded")),k.a.createElement("div",{className:"ml-1"},k.a.createElement(ee.a,{placement:"top",text:"constructor_arguments_ABIencoded_tip"}))),k.a.createElement(X.a.Item,null,p("constructorParams",{initialValue:""})(k.a.createElement("textarea",{rows:"3",className:"w-100"}))))),k.a.createElement("div",{className:"text-center"},k.a.createElement(te.a,{handleCaptchaCode:this.handleCaptchaCode}),k.a.createElement("div",{className:"contract-compiler-button  mt-lg-3 mb-lg-4"},k.a.createElement(o.a,{type:"primary",loading:i,onClick:this.handleVerifyCode,className:"compile-button active ml-4",disabled:!l},Object(x.c)("verify_and_publish")))))))))}}]),t}(C.Component),me={loading:{position:"fixed",top:0,left:0,right:0,bottom:0,display:"flex",justifyContent:"center",alignItems:"center",zIndex:9999,background:"rgba(255,255,255,0.5)"},card:{border:"none",borderRadius:0},hr:{borderTop:"3px solid rgba(0, 0, 0, 0.1)",margin:0},hr_32:{marginTop:"2rem",marginBottom:"2rem"},s_title:{fontSize:"16px",color:"#353535"},rowRight:{marginRight:"1.25rem"},addressWidth:{width:"27%"},verify_header_box:{},verify_header:{maxWidth:"900px",width:"100%",margin:"0 auto"}};var pe,ue,de,fe=X.a.create({name:"contract_verify"})(Object(O.connect)(function(e){return{account:e.app.account}},{})(Object(S.h)(ie))),ye=a(1229),ge=a.n(ye),be=a(83),he=$.a.Option,ve=Object(S.h)(pe=function(e){function t(e){var a;return Object(y.a)(this,t),(a=Object(b.a)(this,Object(h.a)(t).call(this,e))).hideModal=function(){var e=a.props.onHide;e&&e()},a.confirmModal=function(){var e=a.props.onConfirm,t=a.state,n=t.optimizer,c=t.selectedResource,o=t.selectedRuns;e&&e(c,n,o)},a.resourceSelectChange=function(e){a.setState({selectedResource:e})},a.runsSelectChange=function(e){a.setState({selectedRuns:e})},a.handleToggle=function(e){a.props.onOptimizerMsg;return function(t){var n;a.setState((n={},Object(be.a)(n,e,t),Object(be.a)(n,"optimizer",t?"1":"0"),n))}},a.state={loading:!1,resources:[{label:"solidity-0.4.25_Odyssey_v3.2.3",value:"solidity-0.4.25_Odyssey_v3.2.3"}],runs:[{label:"0",value:"0"},{label:"200",value:"200"}],selectedResource:"solidity-0.4.25_Odyssey_v3.2.3",hideSmallCurrency:!0,optimizer:"1",selectedRuns:"0"},a}return Object(E.a)(t,e),Object(g.a)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this.state,t=e.resources,a=e.selectedResource,n=e.hideSmallCurrency,c=e.runs,o=e.selectedRuns,r=this.props;r.trxBalance,r.frozenTrx,r.intl;return k.a.createElement(L.d,{isOpen:!0,fade:!1,className:"modal-dialog-centered _freezeContent"},k.a.createElement(L.g,{className:"text-center _freezeHeader",toggle:this.hideModal},Object(x.c)("contract_compile_params")),k.a.createElement(L.e,{className:"text-center _freezeBody"},k.a.createElement("div",{className:"d-flex p-2 justify-content-between"},k.a.createElement("label",null,Object(x.c)("compile_params_version")),k.a.createElement($.a,{className:"compile-select",value:a,onChange:this.resourceSelectChange},t.map(function(e,t){return k.a.createElement(he,{key:t,value:e.value},e.label)}))),k.a.createElement("div",{className:"d-flex p-2 justify-content-between"},k.a.createElement("label",null,Object(x.c)("compile_params_runs")),k.a.createElement($.a,{className:"compile-select",value:o,onChange:this.runsSelectChange},c.map(function(e,t){return k.a.createElement(he,{key:t,value:e.value},e.label)}))),k.a.createElement("div",{className:"d-flex p-2"},k.a.createElement("label",null,Object(x.c)("compile_params_optimization")),k.a.createElement("div",{className:"compile-switch"},k.a.createElement(ge.a,{checked:n,onChange:this.handleToggle("hideSmallCurrency")}))),k.a.createElement("div",{className:"contract-compiler-button-modal mt-3 mb-2"},k.a.createElement("button",{onClick:this.confirmModal,className:"compile-button-large"},Object(x.c)("confirm")))))}}]),t}(k.a.PureComponent))||pe,Ee=a(2125),Ce=$.a.Option,_e=Object(S.h)(ue=function(e){function t(e){var a;return Object(y.a)(this,t),(a=Object(b.a)(this,Object(h.a)(t).call(this,e))).init=function(){var e=a.props.contractNameList;a.setState({currentContractName:e[0]},function(){a.getConstructorParams(e[0])})},a.hideModal=function(){var e=a.props.onHide;e&&e()},a.confirmModal=function(){var e=a.state,t=e.currentContractName,n=e.feeLimit,c=e.userfeepercentage,o=e.originEnergyLimit,r=e.constructorParams,l=e.currentContractABI,s=e.currentContractByteCode,i=e.sendTokenId,m=e.sendTokenAmount,p=e.sendTokenDecimals,u=(e.params,a.props.onConfirm),d={};d=i&&"_"!=i?{tokenId:i,tokenValue:a.Mul(m,Math.pow(10,p))}:{callValue:a.Mul(m,Math.pow(10,p))};var f=[];for(var y in r)f.push(r[y].value);var g=Object(Z.a)({abi:l,bytecode:s,feeLimit:n,name:t,originEnergyLimit:o,parameters:f,userFeePercentage:c},d);u&&u(g)},a.resourceSelectChange=function(e){a.setState({currentContractName:e},function(){a.getConstructorParams(e)})},a.handleToggle=function(e,t){a.setState(Object(be.a)({},e,t))},a.setParams=function(e,t){var n=a.state.constructorParams.slice(0);n[e].value=t,a.setState({constructorParams:n})},a.getConstructorParams=function(e){var t=[],n=a.props.compileInfo,c=_(n).filter(function(t){return t.contractName==e}).value(),o=c[0].abi,r=c[0].byteCode;o&&o.map(function(e,a){"constructor"===e.type&&e.inputs&&t.push.apply(t,e.inputs)}),t&&t.map(function(e,t){e.value=""}),a.setState({constructorParams:t,currentContractABI:o,currentContractByteCode:r})},a.state={loading:!1,feeLimit:1e9,userfeepercentage:0,originEnergyLimit:1e7,sendTokenAmount:0,constructorParams:[],params:[]},a}return Object(E.a)(t,e),Object(g.a)(t,[{key:"componentDidMount",value:function(){this.init()}},{key:"Mul",value:function(e,t){var a,n,c=e.toString(),o=t.toString(),r=arguments[2];return a=(c.split(".")[1]?c.split(".")[1].length:0)+(o.split(".")[1]?o.split(".")[1].length:0),n=Number(c.replace(".",""))*Number(o.replace(".",""))/Math.pow(10,a),"number"!==typeof r?Number(n):Number(n.toFixed(parseInt(r)))}},{key:"tokenBalanceSelectChange",value:function(e,t,a){this.setState({sendTokenId:e,sendTokenDecimals:t,sendTokenBalance:a})}},{key:"render",value:function(){var e=this,t=this.state,a=t.currentContractName,n=t.feeLimit,c=t.userfeepercentage,o=t.originEnergyLimit,r=t.sendTokenAmount,l=t.constructorParams,s=this.props,i=s.contractNameList;s.intl;return k.a.createElement(L.d,{isOpen:!0,fade:!1,className:"modal-dialog-centered _freezeContent"},k.a.createElement(L.g,{className:"text-center _freezeHeader",toggle:this.hideModal},Object(x.c)("contract_deploy_params")),k.a.createElement(L.e,{className:"_freezeBody"},k.a.createElement("div",{className:"form-group"},k.a.createElement("p",null,Object(x.c)("contract_deploy_modal_info"))),k.a.createElement("div",{className:"form-group contract-deploy"},k.a.createElement("label",null,Object(x.c)("contract_name")),k.a.createElement($.a,{className:"compile-select deploy-select",value:a,onChange:this.resourceSelectChange},i.map(function(e,t){return k.a.createElement(Ce,{key:t,value:e},e)}))),k.a.createElement("div",{className:"form-group contract-deploy"},k.a.createElement("label",null,Object(x.c)("deploy_params_fee_limit")),k.a.createElement("input",{type:"text",onChange:function(t){return e.handleToggle("feeLimit",t.target.value)},className:"form-control deploy-input",value:n})),k.a.createElement("div",{className:"form-group contract-deploy"},k.a.createElement("label",null,Object(x.c)("deploy_params_user_fee_percentage")),k.a.createElement("input",{type:"text",onChange:function(t){return e.handleToggle("userfeepercentage",t.target.value)},className:"form-control deploy-input",value:c})),k.a.createElement("div",{className:"form-group contract-deploy"},k.a.createElement("label",null,Object(x.c)("deploy_params_energy_limit")),k.a.createElement("input",{type:"text",onChange:function(t){return e.handleToggle("originEnergyLimit",t.target.value)},className:"form-control deploy-input",value:o})),k.a.createElement("div",{className:"form-group"},k.a.createElement("label",null,Object(x.c)("deploy_params_send_token")),k.a.createElement("div",{className:"deploy-input-box"},k.a.createElement(Ee.a,{tokenBalanceSelectChange:function(t,a,n){e.tokenBalanceSelectChange(t,a,n)},className:"deploy-token-balance-select"}),k.a.createElement("input",{type:"text",onChange:function(t){return e.handleToggle("sendTokenAmount",t.target.value)},className:"form-control deploy-input ml-4 input-box-sec",value:r}))),l.length>0&&k.a.createElement("div",{className:"form-group"},k.a.createElement("label",null,Object(x.c)("deploy_params_constructor")),l.map(function(t,a){return k.a.createElement("div",{className:"deploy-input-box mb-1",key:a},k.a.createElement("input",{type:"text",onChange:function(t){return e.setParams(a,t.target.value)},className:"form-control deploy-input",value:t.value,placeholder:t.name}),k.a.createElement("input",{type:"text",className:"form-control deploy-input ml-4 input-box-sec",value:t.type,disabled:!0}))})),k.a.createElement("div",{className:"contract-compiler-button-modal mt-3 mb-2"},k.a.createElement("button",{onClick:this.confirmModal,className:"compile-button-large"},Object(x.c)("confirm")))))}}]),t}(k.a.PureComponent))||ue,ke=a(103),Se=a(21),Oe=a.n(Se),Ne=Object(O.connect)(function(e){return{account:e.app.account,wallet:e.wallet.current}})(de=function(e){function t(e){var a;e.match;return Object(y.a)(this,t),(a=Object(b.a)(this,Object(h.a)(t).call(this))).initCompile=function(){if(Oe.a.get("CompileCode")){var e=ce.Base64.encode(Oe.a.get("CompileCode"));a.setState({solidity:e,code:Oe.a.get("CompileCode")})}Oe.a.get("CompileStatus")&&a.setState({CompileStatus:Oe.a.get("CompileStatus")}),Oe.a.get("contractNameList")&&a.setState({contractNameList:Oe.a.get("contractNameList")}),Oe.a.get("compileInfo")&&a.setState({compileInfo:Oe.a.get("compileInfo")})},a.onRadioChange=function(e){window.location.href="verify"==e?"/#/contracts/contract-compiler/verify":"/#/contracts/contract-compiler",a.setState({filters:{direction:e}})},a.enterIconLoading=function(){a.setState({deployLoading:!0})},a.isLoggedIn=function(){var e=a.props,t=e.account,n=e.intl;return t.isLoggedIn||a.setState({modal:k.a.createElement(re.a,{warning:!0,title:Object(x.c)("not_signed_in"),confirmBtnText:n.formatMessage({id:"confirm"}),confirmBtnBsStyle:"danger",onConfirm:function(){return a.setState({modal:null})},style:{marginLeft:"-240px",marginTop:"-195px"}})}),t.isLoggedIn},a.isCompile=function(){var e=a.state.contractNameList,t=a.props.intl;return 0!=e.length||(a.setState({modal:k.a.createElement(re.a,{warning:!0,title:Object(x.c)("\u8bf7\u5148\u7f16\u8bd1"),confirmBtnText:t.formatMessage({id:"confirm"}),confirmBtnBsStyle:"danger",onConfirm:function(){return a.setState({modal:null})},style:{marginLeft:"-240px",marginTop:"-195px"}})}),!1)},a.hideModal=function(){a.setState({modal:null})},a.compileModal=function(){a.isLoggedIn()&&a.setState({modal:k.a.createElement(ve,{onHide:a.hideModal,onConfirm:function(e,t,n){return a.compile(e,t,n)}})})},a.deployModal=function(){a.isLoggedIn()&&a.isCompile()&&a.setState({modal:k.a.createElement(_e,{onHide:a.hideModal,onConfirm:function(e){return a.deploy(e)},contractNameList:a.state.contractNameList,compileInfo:a.state.compileInfo})})},a.getTransactionInfo=Object(f.a)(d.a.mark(function e(){var t,n,c,o,r,l,s,i,m,p,u,f;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=a.state,n=t.txID,c=t.currentContractName,o=t.CompileStatus,r=t.signed,t.options,l={},s=[],i=a.props.account.tronWeb,a.setState({deployLoading:!0}),m=Object(v.a)(a),e.prev=6;case 7:return e.next=9,i.trx.getTransactionInfo(n).catch(function(e){s=[{type:"error",class:"info-error",content:"FAILED deploying ".concat(c,'.  Transaction here <a href="/#/transaction/').concat(n,'" class="info_link" target=\'_blank\'>').concat(n,"</a>")}],o.push.apply(o,s),m.setState({CompileStatus:o,deployLoading:!1})});case 9:if(l=e.sent){e.next=12;break}throw new Error("Not getting transaction info!");case 12:if(!l.id){e.next=27;break}if("SUCCESS"!=l.receipt.result){e.next=26;break}return s=[{type:"success",class:"deploy",content:"Successful deployed contract '".concat(c,"'. Cost: ").concat(l.receipt.energy_fee?Object(ke.e)(l.receipt.energy_fee/1e6):0," TRX, ").concat(l.receipt.energy_usage?Object(ke.e)(l.receipt.energy_usage):0,' energy. Transaction confirm here <a href="/#/transaction/').concat(l.id,'" target=\'_blank\' class="info_link">').concat(l.id,"</a>")}],o.push.apply(o,s),p=i.address.fromHex(r.contract_address),s=[{type:"success",class:"deploy",content:'Contract address: <a href="/#/contract/'.concat(p,'/code" target=\'_blank\' class="info_link"> ').concat(p,"</a>")}],o.push.apply(o,s),e.next=21,ne.a.post("".concat(le.e,"/api/solidity/contract/deploy"),{contractAddress:p,contractName:a.state.currentContractName,optimizer:a.state.optimizer,runs:a.state.runs,compiler:a.state.compilerVersion,encodedSolidity:a.state.solidity,byteCode:a.state.options.bytecode,abi:JSON.stringify(a.state.options.abi)});case 21:u=e.sent,200==u.data.code&&a.setState({CompileStatus:o,deployLoading:!1}),e.next=27;break;case 26:"OUT_OF_ENERGY"==l.receipt.result?(s=[{type:"error",class:"deploy",content:"FAILED deploying ".concat(c,". You lost: ").concat(l.receipt.energy_fee?Object(ke.e)(l.receipt.energy_fee/1e6):0," TRX\nReason: ").concat(i.toUtf8(l.resMessage),'. Transaction here <a href="/#/transaction/').concat(l.id,'" class="info_link" target=\'_blank\'>').concat(l.id,"</a>")}],o.push.apply(o,s),a.setState({CompileStatus:o,deployLoading:!1})):(s=[{type:"error",content:"FAILED deploying ".concat(c,'.\nView transaction here <a href="/#/transaction/').concat(l.id,'" class="info_link" target=\'_blank\'>').concat(l.id,"</a>")}],o.push.apply(o,s),a.setState({CompileStatus:o,deployLoading:!1}));case 27:if(!l.id){e.next=7;break}case 28:e.next=35;break;case 30:e.prev=30,e.t0=e.catch(6),f=[{type:"error",content:"Deploy fail! Error: ".concat(e.t0.toString())}],o.push.apply(o,f),a.setState({CompileStatus:o,deployLoading:!1});case 35:a.setState({deployLoading:!1});case 36:case"end":return e.stop()}},e,null,[[6,30]])})),a.compile=function(){var e=Object(f.a)(d.a.mark(function e(t,n,c){var o,r,s,m,u,f,y,g,b,h,v,E,C,k,S,O;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o=a.props.account,gtag("event","compile",{event_category:"contract",event_label:o.address,referrer:window.location.origin,value:o.address}),a.setState({compileLoading:!0,modal:null,CompileStatus:[],optimizer:n,compilerVersion:t,runs:c}),r=a.state,s=r.CompileStatus,m=r.solidity,e.next=6,ne.a.post("".concat(le.e,"/api/solidity/contract/compile"),{compiler:t,optimizer:n,solidity:m,runs:c}).catch(function(e){var t=[{type:"error",content:"Compiled error: ".concat(e.toString())}];u=t.concat(s)});case 6:if(f=e.sent,y=f.data){e.next=11;break}return a.setState({CompileStatus:u,compileLoading:!1}),e.abrupt("return");case 11:if(200==y.code){if(a.setState({compileLoading:!1}),null==y.errmsg&&y.data!=={}){for(E in g=[],b=[],h=p()(y.data.byteCodeArr,"contractName"),v=_(y.data.abiArr).map(function(e){return i()({},e,h[e.contractName])}).concat(l()(y.data.abiArr,y.data.byteCodeArr,"contractName")).value())C=v[E],k=C.contractName,b.push(k),g.push({type:"success",class:"compile",content:"Compiled success: Contract '".concat(k,"' <span>Show ABI</span> <span>Show Bytecode</span>"),contract:C});a.setState({compileInfo:v,contractNameList:b,CompileStatus:g})}}else y.errmsg&&"string"===typeof y.errmsg&&(S=[{type:"error",content:"Compiled error: ".concat(y.errmsg)}],O=S.concat(s),a.setState({CompileStatus:O,compileLoading:!1}));case 12:case"end":return e.stop()}},e)}));return function(t,a,n){return e.apply(this,arguments)}}(),a.deploy=function(){var e=Object(f.a)(d.a.mark(function e(t){var n,c,o,r,l,s;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.props.account,gtag("event","deploy",{event_category:"contract",event_label:n.address,referrer:window.location.origin,value:n.address}),c=Object(v.a)(a),o=t.name,a.setState({currentContractName:o,options:t}),r=a.state.CompileStatus,l=a.props.account.tronWeb,a.setState({modal:null,deployLoading:!0}),e.prev=8,e.delegateYield(d.a.mark(function e(){var n,s,i,m,p,u,f;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=[{type:"info",content:"Deploy "+t.name+"\n"}],r.push.apply(r,n),a.setState({CompileStatus:r,compileLoading:!1}),e.next=5,l.transactionBuilder.createSmartContract(t);case 5:return s=e.sent,n=[{type:"info",class:"unsigned",content:"Transaction unsigned.",contract:s}],r.push.apply(r,n),a.setState({CompileStatus:r}),e.next=11,l.trx.sign(s);case 11:return i=e.sent,n=[{type:"info",class:"signed",content:"Transaction signed!",contract:i}],r.push.apply(r,n),a.setState({CompileStatus:r}),e.next=17,l.trx.sendRawTransaction(i);case 17:if(m=e.sent,a.setState({txID:i.txID,signed:i}),!0!==m.result){e.next=47;break}n=[{type:"info",class:"broadcast",content:"Broadcast transaction success!",contract:m}],r.push.apply(r,n),a.setState({CompileStatus:r}),p={};case 24:return e.next=26,l.trx.getTransactionInfo(i.txID).catch(function(e){n=[{type:"error",class:"info-error",content:"FAILED deploying ".concat(o,'.  Transaction here <a href="/#/transaction/').concat(i.txID,'" class="info_link" target=\'_blank\'>').concat(i.txID,"</a>")}],r.push.apply(r,n),c.setState({CompileStatus:r,deployLoading:!1})});case 26:if(p=e.sent){e.next=29;break}throw new Error("Not getting transaction info!");case 29:if(!p.id){e.next=44;break}if("SUCCESS"!=p.receipt.result){e.next=43;break}return n=[{type:"success",class:"deploy",content:"Successful deployed contract '".concat(o,"'. Cost: ").concat(p.receipt.energy_fee?Object(ke.e)(p.receipt.energy_fee/1e6):0," TRX, ").concat(p.receipt.energy_usage?Object(ke.e)(p.receipt.energy_usage):0,' energy. Transaction confirm here <a href="/#/transaction/').concat(p.id,'" target=\'_blank\' class="info_link">').concat(p.id,"</a>")}],r.push.apply(r,n),u=l.address.fromHex(i.contract_address),n=[{type:"success",class:"deploy",content:'Contract address: <a href="/#/contract/'.concat(u,'/code" target=\'_blank\' class="info_link"> ').concat(u,"</a>")}],r.push.apply(r,n),e.next=38,ne.a.post("".concat(le.e,"/api/solidity/contract/deploy"),{contractAddress:u,contractName:t.name,optimizer:a.state.optimizer,runs:a.state.runs,compiler:a.state.compilerVersion,encodedSolidity:a.state.solidity,byteCode:t.bytecode,abi:JSON.stringify(t.abi)});case 38:f=e.sent,200==f.data.code&&a.setState({CompileStatus:r,deployLoading:!1}),e.next=44;break;case 43:"OUT_OF_ENERGY"==p.receipt.result?(n=[{type:"error",class:"deploy",content:"FAILED deploying ".concat(o,". You lost: ").concat(p.receipt.energy_fee?Object(ke.e)(p.receipt.energy_fee/1e6):0," TRX\nReason: ").concat(l.toUtf8(p.resMessage),'. Transaction here <a href="/#/transaction/').concat(p.id,'" class="info_link" target=\'_blank\'>').concat(p.id,"</a>")}],r.push.apply(r,n),a.setState({CompileStatus:r,deployLoading:!1})):(n=[{type:"error",content:"FAILED deploying ".concat(o,'.\nView transaction here <a href="/#/transaction/').concat(p.id,'" class="info_link" target=\'_blank\'>').concat(p.id,"</a>")}],r.push.apply(r,n),a.setState({CompileStatus:r,deployLoading:!1}));case 44:if(!p.id){e.next=24;break}case 45:e.next=50;break;case 47:n=[{type:"error",content:"FAILED to broadcast ".concat(o," deploy transaction \n").concat(m.code,"\n").concat(l.toUtf8(m.message),"./>")}],r.push.apply(r,n),a.setState({CompileStatus:r,deployLoading:!1});case 50:case"end":return e.stop()}},e)})(),"t0",10);case 10:e.next=16;break;case 12:e.prev=12,e.t1=e.catch(8),s=[{type:"error",content:"Deploy fail! Error: ".concat(e.t1.toString())}],r.push.apply(r,s);case 16:a.setState({deployLoading:!1});case 18:case"end":return e.stop()}},e,null,[[8,12]])}));return function(t){return e.apply(this,arguments)}}(),a.state={loading:!1,compileLoading:!1,deployLoading:!1,compilerVersion:"",optimizer:"",code:"// type your code...",filters:{direction:"compile"},CompileStatus:[],modal:null,showModal:!1,contractNameList:[],compileInfo:[],runs:"0"},a.onChange=a.onChange.bind(Object(v.a)(a)),a}return Object(E.a)(t,e),Object(g.a)(t,[{key:"editorDidMount",value:function(e,t){e.focus()}},{key:"onChange",value:function(e,t){var a=ce.Base64.encode(e);this.setState({solidity:a,code:e})}},{key:"componentDidMount",value:function(){var e=this.props.match;console.log("match",e),e.params&&"verify"==e.params.type?this.setState({filters:{direction:"verify"}}):this.initCompile()}},{key:"componentWillUnmount",value:function(){var e=this.state,t=e.code,a=e.CompileStatus,n=e.compileInfo,c=e.contractNameList;a&&"// type your code..."!==t&&(Oe.a.set("CompileCode",t),Oe.a.set("CompileStatus",a),Oe.a.set("compileInfo",n),Oe.a.set("contractNameList",c))}},{key:"render",value:function(){var e=this,t=this.state,a=t.modal,n=(t.loading,t.code),c=t.filters,r=t.compileLoading,l=t.deployLoading,s=t.CompileStatus;return k.a.createElement("main",{className:"container header-overlap token_black tokencreated"},a,k.a.createElement("div",{className:"row"},k.a.createElement("div",{className:"col-sm-12"},k.a.createElement("div",{className:"compile-button-box"},k.a.createElement("div",{className:"compile"==c.direction?"compile-button p-3 active":"compile-button p-3",onClick:function(){return e.onRadioChange("compile")}}," ",Object(x.c)("contract_deployment")),k.a.createElement("div",{className:"verify"==c.direction?"compile-button p-3 active ml-4":"compile-button p-3 ml-4",onClick:function(){return e.onRadioChange("verify")}},Object(x.c)("contract_verification"))),"compile"===c.direction?k.a.createElement("div",null,k.a.createElement("div",{className:"compile-text mt-4"},Object(x.c)("contract_deploy_info")),k.a.createElement("div",{className:"card mt-4"},k.a.createElement("div",{className:"card-body"},k.a.createElement("div",{className:"contract-compiler"},k.a.createElement("div",null,k.a.createElement(j.a,{height:"600",language:"sol",theme:"vs-dark",value:n,options:{selectOnLineNumbers:!0},onChange:this.onChange,editorDidMount:this.editorDidMount}),k.a.createElement("div",null,k.a.createElement(U,{CompileStatus:s,deploy:this.getTransactionInfo})),k.a.createElement("div",{className:"contract-compiler-button"},k.a.createElement(o.a,{loading:r,onClick:this.compileModal,className:"compile-button compile"},Object(x.c)("contract_deployment_btn_compile")),k.a.createElement(o.a,{loading:l,onClick:this.deployModal,className:"compile-button active ml-4"},Object(x.c)("contract_deployment_btn_deploy")))))))):k.a.createElement(fe,null))))}}]),t}(k.a.Component))||de;t.default=Object(S.h)(Ne)}}]);